<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Bundle Installations &mdash; perfSONAR Toolkit 3.5rc1 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/perfsonar.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.5rc1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="perfSONAR Toolkit 3.5rc1 documentation" href="index.html" />
    <link rel="next" title="Central Configuration Overview" href="multi_overview.html" />
    <link rel="prev" title="Level 1 and 2 Installations" href="install_level12.html" /> 
  </head>
  <body>
    <header>
        <div class="headerContents">
          <a href="index.html" border="0"><img src="_static/perfSONAR-header.gif"></a>
          <div class="acctSearchContainer">
              <section id="searchBox" class="searchBox">
                  <!--Use of this code assumes agreement with the Google Custom Search Terms of Service. -->
                  <!--The terms of service are available at http://www.google.com/cse/docs/tos.html -->
                  <form action="search.html" id="cse-search-box" method="get">
                    <input type="text" name="q" size="25" class="searchInput" placeholder="Search"/>
                    <input type="hidden" name="check_keywords" value="yes" />
                    <input type="hidden" name="area" value="default" />
                  </form>
              </section>
         </div>
        </div>
    </header>
    <div style="display:block;clear:both;">
    
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="multi_overview.html" title="Central Configuration Overview"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install_level12.html" title="Level 1 and 2 Installations"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">perfSONAR Toolkit 3.5rc1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    </div>
    
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="bundle-installations">
<h1>Bundle Installations<a class="headerlink" href="#bundle-installations" title="Permalink to this headline">¶</a></h1>
<p>perfSONAR combines a number of measurement tools and services. Depending on your needs, you may need only a subset of the software. We have defined the following types of Bundles.</p>
<ol class="arabic simple">
<li><strong>perfSONAR-TestPoint:</strong> This is the most basic perfSONAR installation. It contains a bwctl and owamp server along with tools to publish the location of these services to the perfSONAR-PS Simple Lookup Service.  This type of installation also contains the bwctl, owamp and ndt command-line clients so that you may run one-time tests to other servers. This installation does not include tools on the target host to initiate tests that run on regular time intervals nor does it contain measurement archives that store result of tests.  The perfSONAR-TestPoint install includes everything you need to run one-time tests and for others to find/schedule tests to your site. Full install instructions are contained within the document.</li>
<li><strong>perfSONAR-Core:</strong> The perfSONAR-Core install includes everything in the perfSONAR-TestPoint install plus clients to automatically run scheduled tests over specified time intervals. Full install instructions can be found within this document.</li>
<li><strong>perfSONAR-Complete:</strong> This is considered the full perfSONAR-PS Toolkit rpms. It includes everything in perfSONAR-Core and also contains web interfaces and Toolkit configuration. It is useful if you already have a CentOS host and want to install only the rpms. Full install instructions is included in the document.</li>
<li><strong>perfSONAR-Toolkit ISO:</strong> This installs CentOS and all the Toolkit rpms in perfSONAR-Complete. This is the usual perfSONAR-NetInstall. Full install instructions can be found at <a class="reference internal" href="install_centos_netinstall.html"><em>CentOS NetInstall Guide</em></a>.</li>
<li><strong>perfSONAR-CentralManagement:</strong> The perfSONAR-CentralManagement Bundle installs the central mesh config, Maddash, centralized config service and the autoconfig. Full install instructions is included in the document.</li>
</ol>
<div class="section" id="system-requirements">
<h2>System Requirements<a class="headerlink" href="#system-requirements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Operating System:</strong> Any system running either a 32-bit or 64-bit CentOS 6 operating system should be able to follow the process outlined in this document. Other RedHat-based operating systems may work, but are not officially supported at this time.</li>
<li><strong>Hardware:</strong> Most base-level systems should be adequate to run the measurement tools. You may want to explore a 10Gbps network interface card depending on the throughput testing you wish to perform. See the <a class="reference external" href="http://fasterdata.es.net/performance-testing/perfsonar/ps-howto/hardware/">fasterdata.es.net hardware page</a> for some suggested configurations.</li>
</ul>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>Step 1 is common for all the installs. It specifies how to configure the yum repository. Do this step and then proceed to the installation instructions for the bundle of your choice.</p>
<div class="section" id="step-1-configure-yum">
<span id="install-step1"></span><h3>Step 1: Configure Yum<a class="headerlink" href="#step-1-configure-yum" title="Permalink to this headline">¶</a></h3>
<p>The process configures yum to point at the necessary repositories to get packages needed for perfSONAR. You will need to follow the steps below:</p>
<p>1. Install the EPEL RPM (Note: For i386 systems replace x86_64 with i386)::</p>
<div class="highlight-python"><div class="highlight"><pre>rpm -hUv https://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm
</pre></div>
</div>
<p>2. Install the Internet2-repo RPM  (Note: For i386 systems replace x86_64 with i386):</p>
<div class="highlight-python"><div class="highlight"><pre>rpm -hUv http://software.internet2.edu/rpms/el6/x86_64/main/RPMS/Internet2-repo-0.5-7.noarch.rpm
</pre></div>
</div>
<p>4. Refresh yum&#8217;s cache so it detects the new RPMS</p>
<div class="highlight-python"><div class="highlight"><pre>yum clean all
</pre></div>
</div>
</div>
<div class="section" id="step-2-install-rpm">
<span id="install-step2"></span><h3>Step 2: Install RPM<a class="headerlink" href="#step-2-install-rpm" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>perfSONAR-TestPoint</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre>yum install perfSONAR-Bundles-TestPoint
</pre></div>
</div>
<p>Additionally, you may also install the Toolkit service-watcher, ntp, security(firewall rules and sysctl packages</p>
<p><em>Optional Packages</em></p>
<blockquote>
<div><p>To install additional packages, run:</p>
<div class="highlight-python"><div class="highlight"><pre>/opt/perfsonar_ps/toolkit/scripts/install-optional-packages.py
</pre></div>
</div>
<p>Or, you can manually install them by running:</p>
<blockquote>
<div><ul class="simple">
<li>yum install perfSONAR_PS-Toolkit-service-watcher</li>
<li>yum install perfSONAR_PS-Toolkit-ntp</li>
<li>yum install perfSONAR_PS-Toolkit-security</li>
<li>yum install perfSONAR_PS-Toolkit-sysctl</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>perfSONAR-Core</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre>yum install perfSONAR-Bundles-Core
</pre></div>
</div>
<p>Just as in TestPoint  Bundle, optional packages are available and can be installed via a script or manually.</p>
<p><em>Optional Packages</em></p>
<blockquote>
<div><p>To install additional packages, run:</p>
<div class="highlight-python"><div class="highlight"><pre>/opt/perfsonar_ps/toolkit/scripts/install-optional-packages.py
</pre></div>
</div>
<p>Or, you can manually install them by running:</p>
<blockquote>
<div><ul class="simple">
<li>yum install perfSONAR_PS-Toolkit-service-watcher</li>
<li>yum install perfSONAR_PS-Toolkit-ntp</li>
<li>yum install perfSONAR_PS-Toolkit-security</li>
<li>yum install perfSONAR_PS-Toolkit-sysctl</li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><strong>perfSONAR-CentralManagement</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre>yum install perfSONAR-Bundles-CentralManagement
</pre></div>
</div>
</li>
<li><p class="first"><strong>perfSONAR-Complete</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre>yum install perfSONAR-Bundles-Complete
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="step-3-verify-ntp-and-tuning-parameters">
<span id="level1-step3"></span><h3>Step 3: Verify NTP and Tuning Parameters<a class="headerlink" href="#step-3-verify-ntp-and-tuning-parameters" title="Permalink to this headline">¶</a></h3>
<p><em>Can be ignored for perfSONAR-Toolkit iso and perfSONAR-Complete</em></p>
<ul>
<li><p class="first"><strong>NTP</strong></p>
<ul>
<li><p class="first"><strong>Package Install</strong>:</p>
<p>If the optional package was installed, then run:</p>
<div class="highlight-python"><div class="highlight"><pre>/opt/perfsonar_ps/toolkit/scripts/system_environment/configure_ntpd
/opt/perfsonar_ps/toolkit/scripts/system_environment/enable_ntpd
</pre></div>
</div>
</li>
<li><p class="first"><strong>Manual</strong>:</p>
<p>The Network Time Protocol (NTP) is required by the tools in order to obtain accurate measurements. Some of the tools such as BWCTL will not even run unless NTP is configured. You can verify NTP is running with the following command:</p>
<div class="highlight-python"><div class="highlight"><pre>/usr/sbin/ntpq -p
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first"><strong>System Tuning</strong></p>
<p>It is important to make sure that your host is properly tuned for maximum TCP performance on the WAN. You should verify that cubic, not reno, is the default TCP congestion control algorithm, and that the maximum TCP buffers are big enough for your paths of interest.</p>
<ul>
<li><p class="first"><strong>Package Install</strong></p>
<p>Run:</p>
<div class="highlight-python"><div class="highlight"><pre>/opt/perfsonar_ps/toolkit/scripts/system_environment/configure_sysctl
</pre></div>
</div>
</li>
<li><p class="first"><strong>Manual Tuning</strong></p>
<p>Please refer to <cite>http://fasterdata.es.net/host-tuning/linux/</cite></p>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="step-4-firewall-and-security-considerations">
<span id="install-step4"></span><h3>Step 4: Firewall and Security Considerations<a class="headerlink" href="#step-4-firewall-and-security-considerations" title="Permalink to this headline">¶</a></h3>
<p><strong>Package Install</strong>
If you have installed the perfSONAR_PS-Toolkit-security package, then you can configure the IPTable entries by running:</p>
<div class="highlight-python"><div class="highlight"><pre>/opt/perfsonar_ps/toolkit/scripts/system_environment/configure_firewall
</pre></div>
</div>
<p>The package also installs fail2ban.</p>
<p>Or, if you would like to configure the rules manually, then please review <a class="reference external" href="http://www.perfsonar.net/about/faq/#Q6">perfSONAR FAQ entry</a> and/or the <a class="reference external" href="http://stats.es.net/ps-downloads/20130308-Firewall-PerfWG.pdf">document here</a> on the ports that need to be open.</p>
<p>Additionally, bwctl allows you to limit the parameters of tests such as duration and bandwidth based on the requesters IP address. It does this through a file called bwctld.limits. You may read the bwctld.limits man page or look at the example file provided under /etc/bwctld/bwctld.limits file. ESnet uses a bwctld.limits file that some sites may find useful. This file is based on the routing table and is updated regularly. It implements the following general policies:</p>
<ul class="simple">
<li>Allow unrestricted UDP tests from ESnet test system prefixes.</li>
<li>Allow up to 200Mbps UDP tests from ESnet sites.</li>
<li>Deny UDP tests from any other locations.</li>
<li>Allow TCP tests from IPV4 and IPv6 addresses in the global Research and Education community routing table.</li>
<li>Deny TCP tests from everywhere else.</li>
</ul>
<p>To use the ESnet bwctld.limits file, get this file from ESnet as follows:</p>
<div class="highlight-python"><div class="highlight"><pre>cd /etc/bwctld
mv bwctld.limits bwctld.limits.dist
wget --no-check-certificate http://stats.es.net/sample_configs/bwctld.limits
</pre></div>
</div>
<p>ESnet provides a shell script that will download and install the latest bwctld.limits file. The bwctld.limits file is generated once per day between 20:00 and 21:00 Pacific Time. You can run the shell script from cron to keep your bwctld.limits file up to date (it is recommended that you do this outside the time window when the new file is being generated). To download the shell script from the ESnet server do the following:</p>
<div class="highlight-python"><div class="highlight"><pre>cd /etc/bwctld
wget --no-check-certificate http://stats.es.net/sample_configs/update_limits.sh
chmod +x update_limits.sh
</pre></div>
</div>
</div>
<div class="section" id="step-5-service-watcher">
<span id="install-step5"></span><h3>Step 5: Service Watcher<a class="headerlink" href="#step-5-service-watcher" title="Permalink to this headline">¶</a></h3>
<p>The perl-perfSONAR_PS-Toolkit-service-watcher installs scripts that check if bwctl, owamp and other processes are running and restarts if they have stopped unexpectedly.</p>
<p>The install automatically, configures cron to run the service_watcher regularly.</p>
<p>To run the script manually, run:</p>
<div class="highlight-python"><div class="highlight"><pre>/opt/perfsonar_ps/toolkit/scripts/service_watcher
</pre></div>
</div>
</div>
<div class="section" id="step-6-register-your-services">
<span id="install-step6"></span><h3>Step 6: Register your services<a class="headerlink" href="#step-6-register-your-services" title="Permalink to this headline">¶</a></h3>
<p>In order to publish the existence of your measurement services there is a single file you need to edit with some details about your host. You may populate this information by opening <strong>/opt/perfsonar_ps/ls_registration_daemon/etc/ls_registration_daemon.conf</strong>. You will see numerous properties you may populate. They are commented out meaning you need to remove the <tt class="docutils literal"><span class="pre">#</span></tt> at the beginning of the line for them to take effect. The properties you are <strong>required</strong> to set are as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">##Hostname or IP address others can use to access your service</span>
<span class="c">#external_address   myhost.mydomain.example</span>

<span class="c">##Primary interface on host</span>
<span class="c">#external_address_if_name eth0</span>
</pre></div>
</div>
<p>and the other entries (administrator_email, site_name, city, country, latitude, longitude, etc.) are <strong>highly recommended</strong>.</p>
<p>In the example above remove the leading <tt class="docutils literal"><span class="pre">#</span></tt> before external_address and external_address_if_name respectively. Also replace <em>myhost.mydomain.example</em> and <em>eth0</em> with the values relevant to your host. There are additional fields available for you to set. None of them are required but it is highly recommended you set as many as possible since it will make finding your services easier for others. More information on the available fields can be found in the configuration file provided by the RPM install.</p>
</div>
<div class="section" id="step-7-starting-your-services">
<span id="install-step7"></span><h3>Step 7: Starting your services<a class="headerlink" href="#step-7-starting-your-services" title="Permalink to this headline">¶</a></h3>
<p>You can start all the services by rebooting the host since all are configured to run by default. Otherwise you may start them with the following commands as a root user:</p>
<div class="highlight-python"><div class="highlight"><pre>/etc/init.d/bwctld start
/etc/init.d/owampd start
/etc/init.d/ls_registration_daemon start
</pre></div>
</div>
<p>Note that you may have to wait a few hours for NTP to synchronize your clock before starting bwctld and owampd.</p>
</div>
<div class="section" id="configuring-central-management">
<h3>Configuring Central Management<a class="headerlink" href="#configuring-central-management" title="Permalink to this headline">¶</a></h3>
<p>Refer to the documentation here: <a class="reference internal" href="multi_overview.html"><em>Central Configuration Overview</em></a></p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <nav id="channelNav" class="channelNav">
                
                <ul>
<li><a class="reference internal" href="#">Bundle Installations</a><ul>
<li><a class="reference internal" href="#system-requirements">System Requirements</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#step-1-configure-yum">Step 1: Configure Yum</a></li>
<li><a class="reference internal" href="#step-2-install-rpm">Step 2: Install RPM</a></li>
<li><a class="reference internal" href="#step-3-verify-ntp-and-tuning-parameters">Step 3: Verify NTP and Tuning Parameters</a></li>
<li><a class="reference internal" href="#step-4-firewall-and-security-considerations">Step 4: Firewall and Security Considerations</a></li>
<li><a class="reference internal" href="#step-5-service-watcher">Step 5: Service Watcher</a></li>
<li><a class="reference internal" href="#step-6-register-your-services">Step 6: Register your services</a></li>
<li><a class="reference internal" href="#step-7-starting-your-services">Step 7: Starting your services</a></li>
<li><a class="reference internal" href="#configuring-central-management">Configuring Central Management</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                <ul>
                  <li>
                  <a href="install_level12.html">Previous topic</a>
                  <ul><li><a href="install_level12.html" title="previous chapter">Level 1 and 2 Installations</a></li></ul>
                  </li>
                </ul>
                  <ul>
                      <li>
                      <a href="multi_overview.html">Next topic</a>
                      <ul><li><a href="multi_overview.html" title="next chapter">Central Configuration Overview</a></li></ul>
                      </li>
                  </ul>
                
                
            </nav>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="multi_overview.html" title="Central Configuration Overview"
             >next</a> |</li>
        <li class="right" >
          <a href="install_level12.html" title="Level 1 and 2 Installations"
             >previous</a> |</li>
        <li><a href="index.html">perfSONAR Toolkit 3.5rc1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <footer id="fat">
        <div class="footerContents">
            <nav id="fatFooterNav" class="fatFooterNav">
                <ul id="menu-partners" class="menu depth-0">
                    <li id="footer-partner-text" class="partner-menu">
                        perfSONAR 
                        <br>
                        partners 
                        <br>
                        include: 
                    </li>
    
                <li id="footer-partner-esnet" class="partner-menu">
                    <a href="http://www.es.net/" title="Visit DOE's Energy Sciences Network"><img src="_static/ESnet-ps.png" alt="" style="border:none;"></a> </li>
                
                <li id="footer-partner-geant" class="partner-menu">
                    <a href="http://www.geant.net/" title="Visit GEANT"><img src="_static/geant-ps.png" alt="" style="border:none;"/></a> </li>
        
                <li id="footer-partner-iu" class="partner-menu">
                    <a href="http://www.iu.edu/" title="Visit Indiana University"><img src="_static/IU-ps.png" alt="" style="border:none;"></a> </li>

                <li id="footer-partner-i2" class="partner-menu">
                    <a href="http://www.internet2.edu/" title="Visit Internet2"><img src="_static/I2-ps.png" alt="" style="border:none;"></a> </li>
    
                </ul>

             
            </nav>
            <nav id="minFooterNav" class="minFooterNav">
                <span class="copyright">PERFormance Service Oriented Network monitoring ARchitecture </span>
            </nav>
          
        </div> <!-- /footerContents -->
    </footer>
    
    <div class="footer">
        &copy; Copyright 2014, perfSONAR Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>